async function analyzeCitations(t=null){const e=t||document.getElementById("authorIdInput").value.trim();if(!e)return void showStatus("Please enter an OpenAlex Author ID.","danger");const n=document.getElementById("progressBar"),o=document.getElementById("progressText"),s=document.getElementById("progressBarContainer"),r=document.getElementById("statusAlert"),a=document.getElementById("resultsContainer"),l=document.querySelector("#resultTable tbody");n.style.width="0%",o.textContent="Fetching papers...",s.style.display="block",r.style.display="none",a.style.display="none",l.innerHTML="";try{const t=`https://api.openalex.org/authors/${e}`,s=await fetch(t);if(!s.ok)throw new Error("Author not found. Please check the ID.");const r=(await s.json()).display_name;document.getElementById("resultsTitle").textContent=`Citing Authors of ${r}'s Papers`;const i={};let d="*";for(;d;){const t=`https://api.openalex.org/works?filter=author.id:${e}&per-page=200&cursor=${d}`,s=await fetch(t),a=await s.json();let l=a.results.length,c=0;for(const t of a.results){const e=`https://api.openalex.org/works?filter=cites:${t.id}&per-page=200`,s=await fetch(e);(await s.json()).results.forEach(t=>{t.authorships.forEach(t=>{const e=t.author.id?t.author.id.split("/").pop():null,n=t.author.display_name;e&&n&&n!==r&&(i[n]||(i[n]={ids:new Set,count:0}),i[n].ids.add(e),i[n].count+=1)})}),c++;const a=Math.round(c/l*100);n.style.width=`${a}%`,o.textContent=`Processing ${c} of ${l} papers...`}d=a.meta.next_cursor}if(0===Object.keys(i).length)return void showStatus("No citing author data found.","danger");Object.entries(i).sort((t,e)=>e[1].count-t[1].count).forEach(([t,e])=>{const n=Array.from(e.ids),o=`<tr>\n        <td class="hidden-id">${n.join(", ")}</td>\n        <td title="OpenAlex IDs: ${n.join(", ")}">${t}</td>\n        <td style="text-align: center;">${e.count}</td>\n      </tr>`;l.insertAdjacentHTML("beforeend",o)}),a.style.display="block"}catch(t){showStatus(`Error: ${t.message}`,"danger")}finally{s.style.display="none"}}function showStatus(t,e="info"){const n=document.getElementById("statusAlert");n.textContent=t,n.className=`alert-custom alert-${e}-custom`,n.style.display="block"}